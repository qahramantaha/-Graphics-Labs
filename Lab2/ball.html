<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
  <title>Canvas</title>

  <style type="text/css">
    body {
      background-color: white;
    }


    canvas {
      border: solid black;
    }
  </style>

</head>

<body>
  <h1>Qahraman</h1>
  <canvas id="canvas-for-ball" width="500" height="300"></canvas>

  <script type="text/javascript">
    // Gets a handle to the element with id canvasOne.
    var canvas = document.getElementById("canvas-for-ball");
    // Get a 2D context for the canvas.
    var ctx = canvas.getContext("2d");

    // The vertical location of the ball.
    //creating a class ofr object orianted 
    class Ball {
      constructor(x, y, radius, ySpeed, xSpeed) {
        this.y = y;
        this.x = x;
        this.ySpeed = ySpeed;
        this.xSpeed = xSpeed;
        this.radius = radius;

        this.rotation = 0;
        this.rotationSpeed = 0.1;
      }

      //rotation
      rotate() {
        this.rotation += this.rotationSpeed;
      }

      // Draw method to draw the pacman (stroked, not filled).
      draw() {

        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.rotation);

        //create a Pac Man
        ctx.fillStyle = "rgb(255, 255, 0)";
        ctx.strokeStyle = "black";
        ctx.beginPath();
        ctx.arc(0, 0, this.radius, 5 * Math.PI / 4, 7 * Math.PI / 4, true);
        ctx.stroke();



        //draw mouth
        ctx.moveTo(0, 0);
        var line1 = this.radius * Math.cos(Math.PI / 4 * 5);

        var line2 = this.radius * Math.sin(Math.PI / 4 * 5);

        ctx.lineTo(line1, line2);
        ctx.stroke();


        ctx.moveTo(0, 0);
        var line1 = this.radius * Math.cos(Math.PI / 4 * 7);

        var line2 = this.radius * Math.sin(Math.PI / 4 * 7);

        ctx.lineTo(line1, line2);
        ctx.stroke();

        ctx.restore();

      }
      // move method to update the y + x location.
      move() {
        this.draw();
        this.y += this.ySpeed;
        this.x += this.xSpeed;

        if (this.y >= 300 - this.radius) {
          this.ySpeed = this.ySpeed * -1;
          this.rotationSpeed = -this.rotationSpeed;

        } else if (this.y <= 0 + this.radius) {
          this.ySpeed = this.ySpeed * -1;
          this.rotationSpeed = -this.rotationSpeed;
        }

        if (this.x >= 500 - this.radius) {
          this.xSpeed = this.xSpeed * -1;
          this.rotationSpeed = -this.rotationSpeed;

        } else if (this.x <= 0 + this.radius) {
          this.xSpeed = this.xSpeed * -1;
          this.rotationSpeed = -this.rotationSpeed;
        }

      }

      //resize the ball/pacman
      Resize(r) {
        this.radius = r;
      }

    }

    class Paddle {
      constructor(x, y, width, height, speed) {
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        this.speed = speed;
        this.direction = 0;
      }

      draw() {
        ctx.fillStyle = "blue";
        ctx.fillRect(this.x, this.y, this.width, this.height);
      }

      move() {
        this.y += this.direction * this.speed;
        // Prevent paddle from going off canvas
        if (this.y < 0) this.y = 0;
        if (this.y + this.height > canvas.height) this.y = canvas.height - this.height;

        this.draw();
      }
    
    }
    //create a paddle
    const paddle = new Paddle(20, 100, 15, 60, 5);
    const paddle2 = new Paddle(465, 100, 15, 60, 5);

    //create the ball
    const ball = new Ball(10, 10, 10, 4, 3, 'blue');

    // Key handling
    document.addEventListener('keydown', function (e) {
      if (e.key === 'w' || e.key === 'W') {
        paddle.direction = -1; // move up
      } else if (e.key === 's' || e.key === 'S') {
        paddle.direction = 1; // move down
      }
      if (e.key === 't' || e.key === 'T') {
        paddle.speed = 17;
      }
       
    });

    document.addEventListener('keyup', function (e) {
      if ((e.key === 'w' || e.key === 'W') && paddle.direction === -1) {
        paddle.direction = 0;
      } else if ((e.key === 's' || e.key === 'S') && paddle.direction === 1) {
        paddle.direction = 0;
      }
    });

    // A function to repeat every time the animation loops.
    function repeatme() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      paddle.draw();
      paddle.move();
      paddle2.draw();
      paddle2.move();
      ball.move();
      ball.rotate();
      window.requestAnimationFrame(repeatme);
      // Get the animation going.

      //resize ball
      ball.Resize(11);
    }
    repeatme();

    var canvasPosition = {
      x: canvas.offsetLeft,
      y: canvas.offsetTop

    }
    ctx.fillStyle = "rgb(255, 0, 0)";
    canvas.addEventListener("mousemove", function (event) {



      var mouse = {
        x: event.clientX = 465,
        y: event.clientY - canvasPosition.y

      }


      paddle2.x = mouse.x;
      paddle2.y = mouse.y;
    });


  </script>


</body>

</html>